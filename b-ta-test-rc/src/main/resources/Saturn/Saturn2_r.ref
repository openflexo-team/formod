/* Saturn2_r
 * Author: Hector Ruiz Barradas
 * Creation date: 08/11/2018
 */

REFINEMENT Saturn2_r
REFINES Saturn2

SEES
    Ctx0 ,
    Ctx2

ABSTRACT_VARIABLES
    s_in_l ,
    s_in_r ,
    s_out_l ,
    s_out_r

INVARIANT
    s_in_l : VIN &
    s_in_r : VIN &
    s_out_l : VOUT &
    s_out_r : VOUT &
    in_l = vec_to_in ( s_in_l ) &
    in_r = vec_to_in ( s_in_r ) &
    out_l = vec_to_out ( s_out_l ) &
    out_r = vec_to_out ( s_out_r )

INITIALISATION
    s_in_l := vec_to_in ~ ( i0 ) ||
    s_in_r := vec_to_in ~ ( i0 ) ||
    s_out_l := vec_to_out ~ ( o0 ) ||
    s_out_r := vec_to_out ~ ( o0 )

OPERATIONS
    Get = SELECT 0 = 0 THEN s_in_l : ( s_in_l = s_in_r ) END ;

    Computation = SELECT 0 = 0 THEN s_out_l : ( s_out_l = VBF ( s_in_l ) ) END ;

    Put = SELECT 0 = 0 THEN s_out_r : ( s_out_r = s_out_l ) END

 END
